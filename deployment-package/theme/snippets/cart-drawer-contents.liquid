{%- comment -%}
  Cart Drawer Contents Snippet
  Used by Section Rendering API for cart updates
{%- endcomment -%}

{%- if cart.item_count == 0 -%}
  <div class="flex flex-col items-center justify-center h-full p-8 text-center">
    <div class="p-6 rounded-full bg-stone-100 mb-6">
      <svg class="w-12 h-12 text-stone-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
        <circle cx="9" cy="21" r="1"/>
        <circle cx="20" cy="21" r="1"/>
        <path d="M1 1h4l2.68 13.39a2 2 0 002 1.61h9.72a2 2 0 002-1.61L23 6H6"/>
      </svg>
    </div>
    <p class="text-stone-500 mb-6">{{ section.settings.empty_message | default: 'Your cart is empty' }}</p>
    <a 
      href="{{ routes.all_products_collection_url }}" 
      class="px-6 py-3 bg-stone-900 text-white text-[10px] uppercase tracking-widest font-bold hover:bg-stone-800 transition-colors"
      data-cart-drawer-close
    >
      Continue Shopping
    </a>
  </div>
{%- else -%}
  {%- comment -%} Cart Items {%- endcomment -%}
  <div class="p-6 space-y-6">
    {%- for item in cart.items -%}
      <div class="flex gap-4" data-cart-item="{{ item.key }}">
        {%- comment -%} Image {%- endcomment -%}
        <a href="{{ item.url }}" class="w-20 h-24 bg-stone-100 flex-shrink-0 overflow-hidden">
          {%- if item.image -%}
            {{ item.image | image_url: width: 200 | image_tag: class: 'w-full h-full object-cover' }}
          {%- endif -%}
        </a>
        
        {%- comment -%} Details {%- endcomment -%}
        <div class="flex-1 min-w-0">
          <a href="{{ item.url }}" class="text-sm font-medium text-stone-900 hover:underline block truncate">
            {{ item.product.title }}
          </a>
          
          {%- if item.variant.title != 'Default Title' -%}
            <p class="text-xs text-stone-500 mt-1">{{ item.variant.title }}</p>
          {%- endif -%}
          
          <p class="text-sm font-medium mt-2">{{ item.final_line_price | money }}</p>
          
          {%- comment -%} Quantity Controls {%- endcomment -%}
          <div class="flex items-center gap-3 mt-3">
            <button 
              type="button"
              class="w-8 h-8 flex items-center justify-center border border-stone-200 hover:bg-stone-100 transition-colors"
              data-cart-quantity-minus="{{ item.key }}"
              aria-label="Decrease quantity"
            >−</button>
            <span class="text-sm min-w-[20px] text-center" data-cart-item-quantity>{{ item.quantity }}</span>
            <button 
              type="button"
              class="w-8 h-8 flex items-center justify-center border border-stone-200 hover:bg-stone-100 transition-colors"
              data-cart-quantity-plus="{{ item.key }}"
              aria-label="Increase quantity"
            >+</button>
          </div>
        </div>
        
        {%- comment -%} Remove Button {%- endcomment -%}
        <button 
          type="button"
          class="self-start p-1 text-stone-400 hover:text-stone-900 transition-colors"
          data-cart-remove="{{ item.key }}"
          aria-label="Remove {{ item.product.title }}"
        >
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 6L6 18M6 6l12 12"/>
          </svg>
        </button>
      </div>
    {%- endfor -%}
  </div>
  
  {%- comment -%} Footer {%- endcomment -%}
  <footer class="mt-auto border-t border-stone-100 p-6 space-y-4 bg-stone-50">
    {%- comment -%} Subtotal {%- endcomment -%}
    <div class="flex justify-between items-center">
      <span class="text-sm text-stone-600">{{ 'cart.general.subtotal' | t | default: 'Subtotal' }}</span>
      <span class="text-lg font-medium">{{ cart.total_price | money }}</span>
    </div>
    
    <p class="text-xs text-stone-500">{{ 'cart.general.taxes_and_shipping' | t | default: 'Taxes and shipping calculated at checkout' }}</p>
    
    {%- comment -%} Checkout Button {%- endcomment -%}
    <a 
      href="{{ routes.cart_url }}"
      class="block w-full py-4 bg-stone-900 text-white text-center text-[10px] uppercase tracking-widest font-bold hover:bg-stone-800 transition-colors"
    >
      {{ 'cart.general.checkout' | t | default: 'Checkout' }} • {{ cart.total_price | money }}
    </a>
    
    {%- comment -%} Continue Shopping {%- endcomment -%}
    <button 
      type="button"
      class="block w-full text-center text-[10px] uppercase tracking-widest text-stone-500 hover:text-stone-900 transition-colors py-2"
      data-cart-drawer-close
    >
      Continue Shopping
    </button>
  </footer>
{%- endif -%}
