{% schema %}
{
  "name": "Cart Drawer",
  "settings": [
    {
      "type": "text",
      "id": "empty_message",
      "label": "Empty cart message",
      "default": "Your cart is empty"
    },
    {
      "type": "checkbox",
      "id": "show_vendor",
      "label": "Show vendor",
      "default": false
    }
  ]
}
{% endschema %}

{%- comment -%} Cart Drawer Overlay {%- endcomment -%}
<div class="cart-drawer-overlay fixed inset-0 bg-black/50 z-40 opacity-0 pointer-events-none transition-opacity duration-300" data-cart-drawer-overlay></div>

{%- comment -%} Cart Drawer {%- endcomment -%}
<aside 
  class="cart-drawer fixed top-0 right-0 h-full w-full max-w-md bg-white z-50 transform translate-x-full transition-transform duration-300 flex flex-col"
  data-cart-drawer
  aria-label="{{ 'cart.general.title' | t | default: 'Cart' }}"
  aria-modal="true"
  role="dialog"
>
  {%- comment -%} Header {%- endcomment -%}
  <header class="flex items-center justify-between p-6 border-b border-stone-100">
    <h2 class="text-lg font-medium">{{ 'cart.general.title' | t | default: 'Your Cart' }}</h2>
    <button 
      type="button" 
      class="p-2 hover:bg-stone-100 transition-colors rounded"
      data-cart-drawer-close
      aria-label="{{ 'accessibility.close' | t | default: 'Close' }}"
    >
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M18 6L6 18M6 6l12 12"/>
      </svg>
    </button>
  </header>
  
  {%- comment -%} Content (dynamically updated via AJAX) {%- endcomment -%}
  <div class="flex-1 overflow-y-auto" data-cart-drawer-contents>
    {% render 'cart-drawer-contents' %}
  </div>
</aside>

<script src="{{ 'cart-drawer.js' | asset_url }}" defer></script>

<style>
  .cart-drawer.is-open {
    transform: translateX(0);
  }
  
  .cart-drawer-overlay.is-visible {
    opacity: 1;
    pointer-events: auto;
  }
  
  .cart-drawer.is-loading {
    pointer-events: none;
    opacity: 0.6;
  }
</style>
