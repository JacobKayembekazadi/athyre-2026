{% schema %}
{
  "name": "Video Hero",
  "settings": [
    {
      "type": "select",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "1",
      "options": [
        { "value": "1", "label": "Scheme 1 (Light)" },
        { "value": "2", "label": "Scheme 2 (Dark)" },
        { "value": "3", "label": "Scheme 3 (Accent)" }
      ]
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Move With Purpose"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Small Top Text",
      "default": "Athyre"
    },
    {
      "type": "video",
      "id": "video_hosted",
      "label": "Shopify Hosted Video (MP4)"
    },
    {
      "type": "video_url",
      "id": "video_url",
      "label": "External Video URL",
      "accept": ["youtube", "vimeo"],
      "default": "https://www.youtube.com/watch?v=_9VUPq3SxOc"
    },
    {
        "type": "image_picker",
        "id": "image",
        "label": "Fallback / Cover Image"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button Link"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Enter Sanctuary"
    }
  ],
  "presets": [
    {
      "name": "Video Hero"
    }
  ]
}
{% endschema %}

<section class="color-scheme-{{ section.settings.color_scheme }} relative h-[100vh] min-h-[600px] flex items-center justify-center overflow-hidden">
  {% comment %}
    Background Logic: Hosted Video > External Video > Image
  {% endcomment %}
  <div class="absolute inset-0 z-0">
    {% if section.settings.video_hosted != blank %}
        {{ section.settings.video_hosted | video_tag: autoplay: true, loop: true, muted: true, controls: false, class: 'w-full h-full object-cover opacity-60 grayscale' }}
    {% elsif section.settings.video_url != blank %}
        <iframe 
            src="https://www.youtube.com/embed/{{ section.settings.video_url.id }}?autoplay=1&mute=1&loop=1&playlist={{ section.settings.video_url.id }}&controls=0&showinfo=0&rel=0" 
            class="w-full h-full object-cover scale-[1.3] pointer-events-none opacity-60 grayscale" 
            frameborder="0" 
            allow="autoplay; encrypted-media" 
            allowfullscreen>
        </iframe>
    {% elsif section.settings.image != blank %}
        {{ section.settings.image | image_url: width: 2000 | image_tag: class: 'w-full h-full object-cover opacity-60 grayscale', loading: 'eager' }}
    {% else %}
        <div class="w-full h-full bg-stone-200"></div>
    {% endif %}
    <div class="absolute inset-0 bg-stone-900/30"></div>
  </div>
  
  <div class="relative z-10 text-center text-white mix-blend-difference px-8">
    <span class="text-[10px] uppercase tracking-[0.4em] font-bold block mb-4 animate-in fade-in slide-in-from-bottom-4 duration-1000">{{ section.settings.subheading }}</span>
    <h1 class="text-5xl md:text-9xl font-light tracking-tighter uppercase mb-8 animate-in fade-in slide-in-from-bottom-8 duration-1000 delay-300 leading-none">{{ section.settings.heading }}</h1>
    
    {% if section.settings.button_link != blank %}
      <a href="{{ section.settings.button_link }}" class="inline-block px-12 py-4 border border-white/20 hover:bg-white hover:text-stone-900 transition-all duration-500 text-[10px] uppercase tracking-[0.3em] font-black animate-in fade-in slide-in-from-bottom-8 duration-1000 delay-500 backdrop-blur-sm">
        {{ section.settings.button_text }}
      </a>
    {% endif %}
  </div>

  <div class="absolute bottom-10 left-1/2 -translate-x-1/2 animate-bounce">
    {% render 'icon-arrow-down', class: 'w-6 h-6 text-white/50' %}
  </div>
</section>
