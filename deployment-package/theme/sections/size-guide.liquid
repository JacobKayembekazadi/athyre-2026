{% schema %}
{
  "name": "Size Guide",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "select",
      "id": "color_scheme",
      "label": "Color scheme",
      "options": [
        {
          "value": "1",
          "label": "Light"
        },
        {
          "value": "2",
          "label": "Dark"
        },
        {
          "value": "3",
          "label": "Accent"
        }
      ],
      "default": "1"
    },
    {
      "type": "header",
      "content": "Hero"
    },
    {
      "type": "text",
      "id": "label",
      "label": "Label",
      "default": "Fit Philosophy"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Engineered for the Temple"
    },
    {
      "type": "textarea",
      "id": "philosophy",
      "label": "Fit philosophy text",
      "default": "Our garments are designed to honor the body in motion and rest. We use high-compression performance fabrics for our 'Rise' collection, and draped, relaxed fits for our 'Sanctuary' pieces."
    },
    {
      "type": "header",
      "content": "Size Chart"
    },
    {
      "type": "text",
      "id": "chart_heading",
      "label": "Chart heading",
      "default": "Body Measurements (Inches)"
    },
    {
      "type": "header",
      "content": "How to Measure"
    },
    {
      "type": "text",
      "id": "measure_heading",
      "label": "Measure section heading",
      "default": "How To Measure"
    },
    {
      "type": "image_picker",
      "id": "measure_image",
      "label": "Measurement reference image"
    },
    {
      "type": "header",
      "content": "Help Cards"
    },
    {
      "type": "text",
      "id": "card1_title",
      "label": "Card 1 title",
      "default": "Chat with Stylist"
    },
    {
      "type": "text",
      "id": "card1_text",
      "label": "Card 1 text",
      "default": "Real-time guidance from our fit experts."
    },
    {
      "type": "text",
      "id": "card1_button",
      "label": "Card 1 button text",
      "default": "Start Chat"
    },
    {
      "type": "url",
      "id": "card1_link",
      "label": "Card 1 link"
    },
    {
      "type": "text",
      "id": "card2_title",
      "label": "Card 2 title",
      "default": "Email Support"
    },
    {
      "type": "text",
      "id": "card2_text",
      "label": "Card 2 text",
      "default": "Response within 24 hours."
    },
    {
      "type": "text",
      "id": "card2_button",
      "label": "Card 2 button text",
      "default": "Contact Us"
    },
    {
      "type": "url",
      "id": "card2_link",
      "label": "Card 2 link"
    }
  ],
  "blocks": [
    {
      "type": "size_row",
      "name": "Size Row",
      "settings": [
        {
          "type": "text",
          "id": "size_label",
          "label": "Size label",
          "default": "M"
        },
        {
          "type": "text",
          "id": "us_size",
          "label": "US size",
          "default": "8-10"
        },
        {
          "type": "text",
          "id": "bust",
          "label": "Bust",
          "default": "36-38"
        },
        {
          "type": "text",
          "id": "waist",
          "label": "Waist",
          "default": "29-31"
        },
        {
          "type": "text",
          "id": "hip",
          "label": "Hip",
          "default": "39-41"
        }
      ]
    },
    {
      "type": "measurement",
      "name": "Measurement Instruction",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Bust"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Description",
          "default": "Measure under your arms at the fullest part of your bust. Keep the tape level."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Size Guide Page",
      "blocks": [
        {
          "type": "size_row",
          "settings": {
            "size_label": "XS",
            "us_size": "0-2",
            "bust": "30-32",
            "waist": "23-25",
            "hip": "33-35"
          }
        },
        {
          "type": "size_row",
          "settings": {
            "size_label": "S",
            "us_size": "4-6",
            "bust": "33-35",
            "waist": "26-28",
            "hip": "36-38"
          }
        },
        {
          "type": "size_row",
          "settings": {
            "size_label": "M",
            "us_size": "8-10",
            "bust": "36-38",
            "waist": "29-31",
            "hip": "39-41"
          }
        },
        {
          "type": "size_row",
          "settings": {
            "size_label": "L",
            "us_size": "12-14",
            "bust": "39-41",
            "waist": "32-34",
            "hip": "42-44"
          }
        },
        {
          "type": "size_row",
          "settings": {
            "size_label": "XL",
            "us_size": "16-18",
            "bust": "42-44",
            "waist": "35-37",
            "hip": "45-47"
          }
        },
        {
          "type": "measurement",
          "settings": {
            "title": "Bust",
            "description": "Measure under your arms at the fullest part of your bust. Keep the tape level."
          }
        },
        {
          "type": "measurement",
          "settings": {
            "title": "Waist",
            "description": "Measure around your natural waistline, keeping the tape comfortably loose."
          }
        },
        {
          "type": "measurement",
          "settings": {
            "title": "Hip",
            "description": "Stand with your feet together and measure around the fullest part of your hips."
          }
        }
      ]
    }
  ]
}
{% endschema %}

{%- assign size_rows = section.blocks | where: "type", "size_row" -%}
{%- assign measurements = section.blocks | where: "type", "measurement" -%}

<div class="color-scheme-{{ section.settings.color_scheme }} pt-32 pb-24 px-8 max-w-6xl mx-auto min-h-screen">

  {%- comment -%} HERO {%- endcomment -%}
  <section class="text-center mb-32 max-w-3xl mx-auto">
    {% if section.settings.label != blank %}
      <span class="text-[10px] uppercase tracking-[0.4em] text-stone-400 font-bold block mb-4">{{ section.settings.label }}</span>
    {% endif %}
    {% if section.settings.heading != blank %}
      <h1 class="text-4xl md:text-5xl font-light tracking-tight uppercase mb-8">{{ section.settings.heading }}</h1>
    {% endif %}
    {% if section.settings.philosophy != blank %}
      <p class="text-stone-500 text-sm leading-loose mb-12">{{ section.settings.philosophy }}</p>
    {% endif %}
  </section>

  {%- comment -%} SIZE CHART {%- endcomment -%}
  {% if size_rows.size > 0 %}
    <section class="mb-32">
      {% if section.settings.chart_heading != blank %}
        <h2 class="text-[11px] uppercase tracking-[0.6em] text-stone-400 font-black mb-12 text-center">{{ section.settings.chart_heading }}</h2>
      {% endif %}
      <div class="overflow-x-auto">
        <table class="w-full text-center border-collapse">
          <thead>
            <tr class="border-b border-stone-200">
              <th class="p-6 text-[10px] uppercase tracking-[0.2em] font-black text-stone-900">Size</th>
              <th class="p-6 text-[10px] uppercase tracking-[0.2em] font-black text-stone-400">US Size</th>
              <th class="p-6 text-[10px] uppercase tracking-[0.2em] font-black text-stone-400">Bust</th>
              <th class="p-6 text-[10px] uppercase tracking-[0.2em] font-black text-stone-400">Waist</th>
              <th class="p-6 text-[10px] uppercase tracking-[0.2em] font-black text-stone-400">Hip</th>
            </tr>
          </thead>
          <tbody class="text-sm font-light text-stone-600">
            {% for block in size_rows %}
              <tr class="hover:bg-stone-50 transition-colors border-b border-stone-100" {{ block.shopify_attributes }}>
                <td class="p-6 font-bold text-stone-900">{{ block.settings.size_label }}</td>
                <td class="p-6">{{ block.settings.us_size }}</td>
                <td class="p-6">{{ block.settings.bust }}"</td>
                <td class="p-6">{{ block.settings.waist }}"</td>
                <td class="p-6">{{ block.settings.hip }}"</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </section>
  {% endif %}

  {%- comment -%} HOW TO MEASURE {%- endcomment -%}
  {% if measurements.size > 0 %}
    <section class="mb-32 bg-stone-50 p-12 md:p-24 rounded-[2px] relative overflow-hidden">
      <div class="grid md:grid-cols-2 gap-16 items-center z-10 relative">
        <div>
          {% if section.settings.measure_heading != blank %}
            <h3 class="text-3xl font-serif italic mb-12">{{ section.settings.measure_heading }}</h3>
          {% endif %}
          <div class="space-y-10">
            {% for block in measurements %}
              <div {{ block.shopify_attributes }}>
                <span class="text-[10px] uppercase tracking-widest font-black block mb-2 text-stone-900">{{ forloop.index }}. {{ block.settings.title }}</span>
                <p class="text-[11px] text-stone-500 leading-relaxed">{{ block.settings.description }}</p>
              </div>
            {% endfor %}
          </div>
        </div>
        <div class="flex justify-center">
          {% if section.settings.measure_image %}
            {{ section.settings.measure_image | image_url: width: 600 | image_tag: class: 'w-full max-w-xs', loading: 'lazy' }}
          {% else %}
            <div class="relative h-96 w-48 border-2 border-stone-300 rounded-full flex flex-col justify-between items-center py-10 opacity-60">
              {% for block in measurements %}
                {%- assign offset = forloop.index0 | times: 20 | plus: 25 -%}
                <div class="w-[120%] h-px bg-stone-900 absolute" style="top: {{ offset }}%">
                  <span class="absolute -left-12 -top-2 text-[9px] uppercase">{{ block.settings.title }}</span>
                </div>
              {% endfor %}
            </div>
          {% endif %}
        </div>
      </div>
    </section>
  {% endif %}

  {%- comment -%} HELP CARDS {%- endcomment -%}
  {% if section.settings.card1_title != blank or section.settings.card2_title != blank %}
    <section class="text-center grid md:grid-cols-2 gap-8">
      {% if section.settings.card1_title != blank %}
        {%- assign card1_tag = 'div' -%}
        {%- if section.settings.card1_link != blank -%}{%- assign card1_tag = 'a' -%}{%- endif -%}
        <{{ card1_tag }}{% if section.settings.card1_link != blank %} href="{{ section.settings.card1_link }}"{% endif %} class="border border-stone-200 p-12 hover:border-stone-900 transition-colors group block">
          <h4 class="text-[10px] uppercase tracking-[0.3em] font-black mb-4">{{ section.settings.card1_title }}</h4>
          {% if section.settings.card1_text != blank %}
            <p class="text-stone-500 text-xs mb-8">{{ section.settings.card1_text }}</p>
          {% endif %}
          {% if section.settings.card1_button != blank and section.settings.card1_link != blank %}
            <span class="text-[9px] uppercase tracking-widest border-b border-stone-900 pb-1">{{ section.settings.card1_button }}</span>
          {% endif %}
        </{{ card1_tag }}>
      {% endif %}
      {% if section.settings.card2_title != blank %}
        {%- assign card2_tag = 'div' -%}
        {%- if section.settings.card2_link != blank -%}{%- assign card2_tag = 'a' -%}{%- endif -%}
        <{{ card2_tag }}{% if section.settings.card2_link != blank %} href="{{ section.settings.card2_link }}"{% endif %} class="border border-stone-200 p-12 hover:border-stone-900 transition-colors group block">
          <h4 class="text-[10px] uppercase tracking-[0.3em] font-black mb-4">{{ section.settings.card2_title }}</h4>
          {% if section.settings.card2_text != blank %}
            <p class="text-stone-500 text-xs mb-8">{{ section.settings.card2_text }}</p>
          {% endif %}
          {% if section.settings.card2_button != blank and section.settings.card2_link != blank %}
            <span class="text-[9px] uppercase tracking-widest border-b border-stone-900 pb-1">{{ section.settings.card2_button }}</span>
          {% endif %}
        </{{ card2_tag }}>
      {% endif %}
    </section>
  {% endif %}

</div>
